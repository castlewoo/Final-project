{% extends "base.html" %}
{% load static %}
{% block content %}

<script>
  function setThumbnailOne(event){
          let img = document.createElement('img'); // img 태그 동적 생성
          const reader = new FileReader(); // 파일정보 읽어올 객체 변수 생성
          reader.onload = function(event){ // 파일 정보를 읽으면 (사용자가 파일을 선택했으면)
              img.setAttribute('src', event.target.result); // 파일경로 추출해서 <img src=속석값으로 전달>
              img_name = event.target.result

          }
          reader.readAsDataURL(event.target.files[0]);
          document.querySelector('#imgPreviewOne').appendChild(img); // 동적 생성한 img 태그 html 코드에 부착
      }
  function submitForm() {
        document.getElementById("uploadForm").submit();
    }

  function analyzeFood() {
        submitForm();  // 버튼클릭 시 폼 서브밋
    }
</script>

  <section id="hero" class="hero d-flex align-items-center section-bg">
    <div class="container" style="max-width: 1300px;">

      <div class="row justify-content-center gy-5"> <!-- 중앙 정렬 -->
        <div class="col-lg-5 text-center">
          <h2 data-aos="fade-up" style="font-size: 45px;">Please upload a photo of your dish here<br>We'll help you find your food!</h2>
        </div>
      </div>
      <div class="row justify-content-center gy-5"> <!-- 중앙 정렬 -->
        <div class="col-lg-5 text-center">
          <form id="uploadForm" method='post' enctype='multipart/form-data' data-aos="fade-up" action="{% url 'deep_app:file_upload' %}">
            {% csrf_token %}
            이미지 : <input type='file' name='imgFile' id='imgFile' onchange="setThumbnailOne(event)">
        </form><br>
        
        <div id="imgPreviewOne"></div>
        
        </div>
      </div>
      <div class="row justify-content-center gy-5"> <!-- 중앙 정렬 -->
        <div class="col-lg-5 text-center">
          <div class="d-flex justify-content-center" data-aos="fade-up" data-aos-delay="200">
            <a href="result" class="btn-book-a-table" onclick="analyzeFood()">Analyze Food</a>
          </div>
        </div>
      </div>
    </div>
  </section><!-- End Hero Section -->
  
  

  <main id="main">

  </main><!-- End #main -->

  <!-- ======= Footer ======= -->
  <footer id="footer" class="footer">

    <div class="container">
      <div class="row gy-3">
        <div class="col-lg-3 col-md-6 d-flex">
          <div>
            <h4>developer</h4>
            <p>
              Kim Sungwoo <br>
              Kim Myeongjun <br>
              Seo Juewon <br>
            </p>
          </div>
        </div>
      </div>
    </div>

    <div class="container">
      <div class="copyright">
        &copy; Copyright <strong><span>Yummy</span></strong>. All Rights Reserved
      </div>
      <div class="credits">
        <!-- All the links in the footer should remain intact. -->
        <!-- You can delete the links only if you purchased the pro version. -->
        <!-- Licensing information: https://bootstrapmade.com/license/ -->
        <!-- Purchase the pro version with working PHP/AJAX contact form: https://bootstrapmade.com/yummy-bootstrap-restaurant-website-template/ -->
        Designed by <a href="https://bootstrapmade.com/">BootstrapMade</a>
      </div>
    </div>

  </footer><!-- End Footer -->
  <!-- End Footer -->

  <a href="#" class="scroll-top d-flex align-items-center justify-content-center"><i class="bi bi-arrow-up-short"></i></a>

  <div id="preloader"></div>

  <!-- Vendor JS Files -->
  <script src="{% static 'main/assets/vendor/bootstrap/js/bootstrap.bundle.min.js' %}"></script>
  <script src="{% static 'main/assets/vendor/aos/aos.js' %}"></script>
  <script src="{% static 'main/assets/vendor/glightbox/js/glightbox.min.js' %}"></script>
  <script src="{% static 'main/assets/vendor/purecounter/purecounter_vanilla.js' %}"></script>
  <script src="{% static 'main/assets/vendor/swiper/swiper-bundle.min.js' %}"></script>
  <script src="{% static 'main/assets/vendor/php-email-form/validate.js' %}"></script>

  <!-- Template Main JS File -->
  <script src="{% static 'main/assets/js/main.js' %}"></script>
  {% endblock content %}